- build = @build[input.package.id] || []

%blockquote.group{data: {group: parent.id}, class: ('visible' if visible)}
  %label.checkbox.inline
    %input{checked: build.include?(input.id), type: "checkbox", data: {switcher: input.id}}
    = input.title
  %input.input{type: 'text', placeholder: "enter value", name: "options[#{input.package.id}][#{input.id}]", disabled: !build.include?(input.id), class: ('visible' if build.include?(input.id)), value: build[input.id]}

  - input.selectors.each do |selector|
    = render(:'_selector.haml', layout: false, locals: {selector: selector, parent: input, visible: build.include?(input.id)})
  - input.options.each do |sub_option|
    = render(:'_option.haml', layout: false, locals: {option: sub_option, parent: input, visible: build.include?(input.id)})
  - input.inputs.each do |sub_input|
    = render(:'_input.haml', layout: false, locals: {input: sub_input, parent: input, visible: build.include?(input.id)})